# 测试步骤
## 相关代码
```java
package test1;

public class Name {
	protected String firstName,lastName;
	public Name(String firstName, String lastName) {
		this.firstName = firstName;
		this.lastName = lastName;
	}
	
	public String getFirst() {return firstName;}
	public String getLast() {return lastName;}

	public static void main(String[] args) {
		String nameS1 = "Jiakai He";
		String nameS2 = "Kong, Jason"; // 定义字符串名字
		
		Name name1 = NameFactory.getName(nameS1);  // 调用
		Name name2 = NameFactory.getName(nameS2);
		
		System.out.println(nameS1 + ", first name:" + name1.getFirst() +
		", last name:" + name1.getLast());
		System.out.println(nameS2 + ", first name:" + name2.getFirst() +
		", last name:" + name2.getLast());
	}
}

class FirstFirst extends Name {
	public FirstFirst(String firstName, String lastName) {
		super(firstName, lastName);
	}
}

class LastFirst extends Name {
	public LastFirst(String firstName, String lastName) {
		super(firstName, lastName);
	}
}

class NameFactory {
	public static Name getName(String s) {
		if (s.indexOf(",") != -1) { // 判断 "last, first" 格式
			String[] commaParts = s.split(", "); // 使用split方法将字符串分隔
			return new LastFirst(commaParts[1], commaParts[0]); // 交换位置
		} else if (s.indexOf(" ") != -1) { // 判断 "first last" 格式
			String[] parts = s.split(" ");
			return new FirstFirst(parts[0], parts[1]);
		} else {
			throw new IllegalArgumentException("不合法格式");
		}
	}
}
```

## 对应输出结果说明
![[微信图片_20231023002724.png]]
红色框为姓名，黄色框为名firstName，蓝色框为姓lastName

# 算法原理概述
### 对应的UML图
![[微信截图_20231023004748.png]]
`NameFactory`与`Name`构成依赖关系，内含`public getName(String s)`方法
`FirstFirst`与`LastLast`和`Name`构成继承关系，`Name`中有`public getFirst()`与`public getLast()`方法

### NameFactory的设计
1. 判断标志
	此处按照**是否有逗号以及是否有空格**进行区分，有逗号说明为第二种，没有逗号但有空格说明为第一种，反之都不满足则报错
2. 创建对应变量方式
	此处使用`String`的`split()`方法，将姓名分隔，并按照不同顺序作为参数传入`FirstFirst`与`LastLast`中

# 实验结果与验证
## 结果验证
详见输出结果，经检验得，符合实际情况，姓名种类与划分方式均正确

## 讨论
1. 判断姓名种类错误
一开始判断逗号的代码中，我使用了  `s.contains(",")` ，这个条件不够严谨，因为名字中可能会包含逗号，例如 "Smith, John Jr."。应该使用 ` s.indexOf(",") != -1 ` 来判断是否有逗号。
另外，判断空格的代码可以使用  `s.indexOf(" ") != -1`  来代替 ` s.split(" ").length == 2 `，这样可以避免不必要的字符串分割操作。

2. **依赖关系的优点**
	1. **解耦**：通过将姓名解析逻辑封装在NameFactory类中，并与其他类解耦，可以降低代码的复杂性，使得代码更易于维护和修改。
	2. **可重用性**：NameFactory类可以作为一个独立的组件，用于解析其他类似的字符串格式，提高了代码的可重用性。