> [!note] 期末考点
> 1. (隐)马尔可夫概率计算

# 绪论

## 知识处理

# 知识获取
## 发展背景
### 知识工程

> [!info] **符号主义**
> - 人工智能源于数理逻辑
> - 智慧的本质是符号的操作和运算
> $$AI\quad System = Knowledge + Reasoning$$

发展背景：
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240331235705.png)

**知识工程**是以知识为处理对象，研究知识系统的知识表示、处理和应用的方法和开发工具的学科
- 规模小
- 成本高
- 知识汤
- 依赖人工构建
- 存在瓶颈，人类大脑知识过多，难以对机器进行编码
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240331235613.png)
知识图谱工程：从不同来源(关系数据库、视觉数据、文本...)、不同结构的数据中进行知识提取，形成知识存入到知识图谱

知识图谱 ≠ 专家系统
## 知识获取基本概念
>[!info] 知识的概念
> Knowledge is <font color='red'> justified true </font>belief. 
> 知识是一种确证了的，真实的信念

**知识获取**(Knowledge Acquisition, KA)可以被简单地表述为从领域专家的交互中获取知识
基本要求：
	1. 准确性：准确代表领域专家的经验和思维方法
	2. 可靠性：被大多数领域专家所公认和理解，并能经得起实践检验
	3. 完整性：检查或保持已获取知识集合的一致性或无矛盾性
	4. 精炼性：无冗余

**步骤**
	1. 识别领域知识基本结构
	2. 抽取细节知识转换成机器可识别的形式
	3. 调试精炼知识库
#### 知识获取的途径
1. 借助于知识工程师从专家获取
	 1) 无推理能力
	 2) 容易产生认知误差
	 3) 专家资源的缺乏
2. 借助于知识获取程序从专家获取(半自动知识获取)
3. 借助于归纳程序从大量数据中归纳出所需知识
4. 借助于文本理解程序从教科书或科技资料中提炼出所需知识

- 人工知识获取
- 半自动知识获取(交互式知识获取)
	- 采用交互式对话的方式，帮助专家提取、归纳有关知识，并将其存入知识库中
- 自动知识获取
	- 由领域专家直接提供知识、数据和有关资料，知识获取过程完全由知识系统或知识获取工具自动完成
	- 知识系统本身具有自学习能力
	- 开发专门的机器学习系统，让机器自动从实际问题中获取知识

## 面向非结构化数据的知识获取
非结构化：
![image.png|475](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404095217.png)

三任务：
	实体抽取、关系抽取与事件抽取
### 实体抽取(识别)
从给定的原始文本等数据语料中自动识别得到所需实体的过程
主要任务是**抽取文本中的原子信息元素**，如人名、组织名或机构名、地理位置、时间或日期、字符值、金额等。

步骤：
- 实体**边界**判断：确定实体字符串在非结构化文本中的开始位置和结束位置；
- 实体**类别**判断：判断该字符串对应的实体类型
![image.png|423](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404095511.png)
#### 实体识别常用方法：基于模板和规则
- 将文本与规则进行匹配来识别出命名实体
	- "xxx说", "xxx老师"...
优点：
- 准确，有些实体识别只能依靠规则抽取
缺点：
- 需要大量的语言学知识
- 需要谨慎处理规则之间的冲突问题
- 构建规则的过程费时费力
#### 基于序列标注的方法
![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404095556.png)

使用机器学习算法进行实体识别任务
- 标注的标签一般同时能表示实体的边界和类别信息。
- 典型的标注格式是BIO 标签体系，即将每个元素标注为“B-X”、“I-X”或者“O”，其中，
	 “B-X”表示此元素所在的片段属于X类型并且此元素在此片段的开头
	 “I-X”表示此元素所在的片段属于X类型并且此元素在此片段的中间位置
	 “O”表示不属于任何类型
	 ![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404101611.png)
- 在实际应用中，也有一些系统采用更复杂的**BIOES**标签体系，在BIO标签的基础上增加了**单字符实体S**和**字符实体的结束标识E**
##### 常见序列标注模型：隐马尔可夫模型
有向图模型
基于马尔可夫性，假设特征之间是独立的

>[!info] 马尔可夫链
>考虑一个随机变量的序列 $X = {X_0,X_1,...,X_t}$，这里 $X_t$ 表示时刻 $t$的随机变量，$t=0,1,2,...$。每个随机变量$X_t(t=0,1,2,...)$的取值集合相同，称为状态空间，表示为$S$。随机变量可以是离散的，也可以是连续的。以上随机变量的序列构成随机过程(stochastic process)
>
> 假设在时刻0的随机变量$X_0$遵循概率分布$P(X_0)=\pi_0$，称为初始状态分布。在某个时刻$t\ge1$的随机变量$X_t$与前一个时刻的随机变量$X_{t-1}$之间有条件分布$P(X_t|X_{t-1})$，如果$X_t$只依赖于$X_{t-1}$，而不依赖于过去的随机变量$\{X_0,X_1,...,X_{t-2}\}$，这一性质称为马尔可夫性
###### 基本定义
直观解释：“未来只依赖于现在，而与过去无关”

n 阶马尔可夫链：$$P(X_t|X_0 X_1....X_{t-2}X_{t-1}) = P(X_t|X_{t-n}...X_{t-1})$$
离散状态马尔可夫链 $X=\{X_0,X_1,...,X_t,...\}$，随机变量$X_t(t=0,1,2...)$定义在离散空间S，
转移概率$p_{ij}$可以由矩阵表示，即$$
P=
\begin{bmatrix}
p_{11} &p_{12} &p_{13} &\cdots\\
p_{21} &p_{22} &p_{23} &\cdots\\
p_{31} &p_{32} &p_{33} &\cdots\\
\cdots &\cdots &\cdots &\cdots
\end{bmatrix}$$
称为马尔科夫链的**转移概率矩阵**，其满足条件$$p_{ij}\ge0,\quad \sum_i p_{ij}=1$$
满足以上条件的矩阵称为随机矩阵，列元素和为1

特别的，马尔可夫链的初始状态分布可表示为$$\pi(0)^T=[\pi_1(0) \quad \pi_2(0) \quad \cdots]$$初始分布 $\pi(0)$ 一般只有一个位置是1，其余均为0

马尔可夫链X在时刻 $t$ 的状态分布，可以由在时刻 $(t-1)$ 的状态分布以及转移概率分布决定$$\pi(t)=P\pi(t-1)$$
马尔可夫链在时刻 $t$ 的状态分布，可以通过递推得到。由$$\pi(t)=P\pi(t-1)=P(P\pi(t-2))=P^2\pi(t-2)$$递推得到$$\pi(t)=P^t \pi(0)$$
这里的$P^t$称为 $t$ 步转移概率矩阵$$P^t_{ij}=P(X_t = i|X_0 = j)$$
表示时刻0从状态 j 出发，时刻t达到状态 i 的 t 步转移概率
###### 隐马尔科夫模型(详见笔记)
> [!info] 介绍
> 由一个隐藏的马尔科夫链随机生成不可观测的状态随机序列，再由各个状态生成一个观测从而产生观测随机序列的过程。
> 隐藏的马尔可夫链随机生成的状态的序列，成为状态序列；每个状态生成一个观测，由此产生的观测的随机序列，称为观测序列，序列的每一个位置可看作是一个时刻

**基本假设：**
- **齐次马尔可夫性假设**：隐马尔可夫链 $t$ 的状态只和 $t-1$ 状态有关
- **观测独立性假设**：观测只和当前时刻状态有关

**观测序列的生成：**
- 输入：隐马尔可夫模型$\lambda=(A,B, \pi)$，观测序列长度$T$
- 输出：观测序列 $O=(o_1, o_2,...,o_T)$
1) 按照初始状态分布 $\pi$ 生成状态 $i_1$
2) 令 $t=1$
3) 按照状态 $i_t$的观测概率分布$b_{i_t}(k)$生成$o_t$
4) 按照状态$i_t$的状态转移概率分布$\{o_{i,i_{t+1}}\}$产生状态$i_{t+1}$，$i_{t+1}=1,2,...,N$
5) 令 $t=t+1$，如果$t<T$，转步(3)，否则终止

**三个基本问题：**
1) 概率计算问题
	给定模型$\lambda=\{A, B, \pi\}$和观测序列 $O=\{o_1, o_2, ..., o_T\}$，计算在模型 $\lambda$ 下观测序列 O出现的概率$P(O|\lambda)$
2) 学习问题
	 已知观测序列，估计模型参数，使得在该模型下观测序列概率最大，即用极大似然的方法估计参数
3) 预测问题
	 也称为解码问题。已知模型和观测序列，求对给定观测序列条件概率 $P(I|O)$ 最大的状态序列 $I=(i_1, i_2,..,i_T)$。即给定观测序列，求最有可能的对应的状态序列
### 关系抽取
旨在从**无结构文本**中**识别两个或多个实体之间的语义关系**
是信息检索、智能问答、人机对话等应用系统中不可或缺的基础任务，也是知识图谱构建所依赖的关键技术之一。

主要介绍二元关系抽取，关注两个实体之间的语义关系。实体间的关系可以用$<HEAD，RELATION，TAIL>$三元组进行表示，其中Head和Tail分别表示头实体和尾实体，Relation表示实体之间的关系类型
>例如：根据句子“刘翔出生于上海”。
>可抽取 <刘翔，出生地，上海>，表示“刘翔”和“上海”之间存在“出生地”关系
- 主流的关系抽取方法
	- 基于模板
	- 有监督学习
	- 弱监督学习
#### NLP基本知识
##### 词的概念
**形式和意义**相结合的单位，也是语言中能够**独立运用的最小单位**
- 由**语素**构成
	- 语言中**意义的最小单元**
	- 不能独立运用
- **词性(词类)**
	- 实义词
		- 表达具体实义，可增加
	- 功能词
		- 满足语法功能需求，增加较少
	- 名词
	- 动词
	- 形容词
	- 副词
	- 数词
	- 代词
	- 冠词
	- 没有统一的划分标准
##### 词语规范化
将单词或词形转化为标准形式
- 句子切分、词语切分、词语规范化
	- 英语(印欧语系)：通过空格切分
	- 汉语(汉藏语系)：词语切分
		- 中文分词：将连续子序列转换为对应的词序列的过程
		- 问题：分词规范、歧义切分和未登录词识别
- 通过词典结合模板和监督分类
##### 词性标注
难点：歧义性、无统一词性划分标准
算法：基于规则、基于隐马尔可夫

##### 依存句法分析
在基于依存关系的语法中，句子中的每个成分对应句法结构中的**唯一一个节点**。两个成分之间的依存关系是**二元的非对称关系**，具有方向性，一个成分是中心语，另一个成分依附于中心语存在，**关系从中心语成分指向依存成分**。
- **中心成分**称为中心词或支配者(Governor,Regent,Head)
- **依存成分也称为修饰词或从属者**(Modifier,Subordinate,Dependency)
![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404105321.png)

- 成分句法分析
	- 对给定句子根据成分语法中制定的规则构建起所对应的结构树的过程
	- X -> Y Z W

#### 基于模板的方法
- 基于**触发词匹配**的关系抽取
	- 在小规模数据集容易实现
	- 构建简单
	- 需要专家构建
	- 难维护
	- 可移植性差
	- 规则集合小的时候，召回率很低
![](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404105548.png)

- 基于**依存句法匹配**的关系抽取
	- 以动词为节点，构建规则 
![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404105614.png)

#### 有监督学习的关系抽取
![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404105702.png)
特征设计，构造特征函数与最大熵模型
##### 最大熵原理用于关系抽取
- 最大熵模型的训练过程可以简述为选取有效的特征 $f_i$ 及其权重 $ω_i$。所以能够包含更多语义信息的特征条件对最大熵模型的训练尤为关键。
- 针对关系抽取问题，提及对之间所具备的关系需要**通过输入的文本内容进行确定**，因此关系抽取中通常需要抽取**提及本身以及提及对之间的特征**，常见的特征有：
	1) **单词特征**：提及对中两个提及的单词和这两个提及中间的所有单词。
	2) **实体类型**特征：两个提及所表示的实体的类型。
	3) **重叠性特征**：两个提及中间的单词数目；两个提及中间其他提及的数量以及指示这两个提及是否是相同的词性（如名词或者动词）的标志。
	4) **依赖性**特征：依存关系树中提及对所依赖的单词以及单词的词性和组块标签。
	5) **语法树**特征：语法树中连接这提及对的非终结符(去掉重复项)的路径
#### 无监督-深度学习
基于特征的方法需要人工设计特征，这类方法适用于标注数量较少，精度要求较高，人工能够胜任的情况。
深度学习技术不断发展，端到端的抽取方法能**大幅减少特征工程**，并**减少对词性标注等预处理模块的依赖**，成为当前关系抽取技术的主流技术路线。
#### 半监督(bootstrapping)
- 远程监督(远程数据库)
	- 知识库与非结构化文本对齐来自动构建大量训练数据，减少模型对人工标注数据的依赖，增强模型跨领域适应能力
	- 远程监督方法假设知识库中两个实体存在某种关系，那么所有提及了这两个实体的句子都表达了这种关系
	- ![image.png](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404110505.png)
	- 缺点：构建标签的假设过于宽松，非常容易导致大量的错误标注，从而严重影响模型的性能
- Bootstrapping
	- 通过在文本中匹配实体对和表达关系短语模式，寻找和发现新的潜在关系三元组
	- 一种自训练的方法，目标是通过较少的标注数据训练出较好的实体关系抽取模型，并抽取大量的关系实例
	- 基本思想：利用少量的实例作为初始种子集合，然后进行学习得到新的规则库，进而根据新老规则库抽取新的元组，并扩充种子集合，通过不断的迭代，从非结构化数据中寻找和发现新的潜在三元组。这是一种朴素的迭代扩充样本的方法
	- 缺点：语义漂移现象

### 事件抽取
事件是发生在某个特定的时间点或时间段、某个特定的地域范围内，由一个或多个角色参与的一个或者多个动作组成的事情或状态的改变

**事件抽取**目标是从文本中发现特定类型事件，并抽取该事件所设计的时间、地点、人物等元素

事件由**事件触发词**和**事件论元**组成

限定域事件抽取需要**预先定义事件类型以及与之对应的事件论元**，抽取算法的目标就是从包含事件的文本中**识别特定类型的事件并提取相应的事件论元**
- 事件类型是标识事件的类别，如“会议”、“袭击”等。
- 事件触发词是指最清楚和明显地表达事件发生的主要词，如“击打”、“结婚”等。
- 事件论元是指事件中涉及的参与者，一般为实体、时间等。
- 论元角色（也称元素角色）是指事件论元在事件中所扮演的角色。

事件要素抽取：
- 识别事件要素：参与事件的主体
- 分类要素的角色：参与事件的实体在事件所扮演的角色
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240329080839.png)

#### 模式匹配
![image.png|475](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404110819.png)
- 基于模式匹配的方法在特定领域中性能较好，便于理解和后续应用，但对于语言、领域和文档形式都有不同程度的依赖，覆盖度和可移植性较差。
- 模式匹配的方法中，**模板准确性**是影响整个方法性能的重要因素，主要特点是**高准确率低召回率**
#### 机器学习
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404110937.png)
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404110943.png)

## 面向半结构化数据的知识获取
主要是指从**互联网网页**中获取结构化的知识信息，由于半结构化数据（网页）具有大量的重复性结构，如电商网站中的商品数据、黄页网站中的公司数据等，因此对数据进行少量的标注可以得到一定的规则，进而在整个站点下使用规则对同类型或符合某种关系的数据进行抽取。
![image.png|475](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404111053.png)
## 面向结构化数据的知识获取
指从现有的关系型数据库表中提取三元组结构的知识信息。
转换方法包括**手工转换法**与**基于工具**的转换方法

![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404111133.png)
![image.png|500](https://cdn.jsdelivr.net/gh/BlackJack0083/image@main/img/20240404111144.png)

## 章末习题
1. 知识的传统三元定义的具体内容是什么？
   知识的传统三元定义是指知识由三个基本要素组成：信念（Belief）、真（Truth）和确证（Justification）。这意味着知识是一种被确证的、真实的信念。换言之，一个人所持有的信念如果既是真实的，又得到了充分的证据支持，那么这个信念就构成了知识。

2. 从知识图谱的角度来讲，什么是知识获取？
   从知识图谱的角度来讲，知识获取是指从各种数据源中提取有价值的信息，并将其转换成结构化的形式存入知识图谱的过程。这包括从文本、数据库、互联网等多种数据源中抽取实体、关系以及属性等知识要素单元，形成一系列高质量的事实表达，为知识图谱的构建奠定基础。

3. 知识获取的一般步骤及主要途径有哪些？
   知识获取的一般步骤包括：识别领域知识的基本结构，寻找适当的知识表示方法；抽取细节知识转换成机器可识别的形式；调试精练知识库。主要途径有：借助于知识工程师从专家获取；借助于智能编辑程序从专家获取；借助于归纳程序从大量数据中归纳出所需知识；借助于文本理解程序从教科书或科技资料中提炼出所需知识。

4. 从自动化程度来看，知识获取的方式主要有哪几种？每种方式的特点是什么？
   从自动化程度来看，知识获取的方式主要有人工知识获取、半自动知识获取和自动知识获取。人工知识获取需要知识工程师与领域专家合作，通过手动分析、综合、整理、归纳后存入知识库，费时且低效。半自动知识获取借助知识获取工具的帮助，在知识工程师的指导干预下进行，采用交互式对话的方式帮助专家提取、归纳知识。自动知识获取由领域专家提供数据和资料，知识获取过程完全由知识系统或工具自动完成，知识工程师仅协调知识获取过程，具有推理能力，能从已有知识中发掘新知识。

5. 面向非结构化数据的知识获取的主要任务是什么？
   面向非结构化数据的知识获取的主要任务包括实体抽取、关系抽取和事件抽取。实体抽取主要是命名实体识别，关系抽取即三元组抽取，事件抽取相当于多元关系的抽取。

6. 从网页中提取知识的主要方法有哪些？
   从网页中提取知识的主要方法有手工法、包装器法和自动抽取法。手工法需要人工分析网页结构和代码，手动编写适合网站结构路径提取的表达式。包装器法通过学习半结构化数据的抽取规则，基于规则获取相应知识。自动抽取法可自动从网页中寻找相关模式，并利用这些模式实现对网页内容的知识抽取。

7. 用于关系型数据到三元组结构转换的常见工具有哪些？
   用于关系型数据到三元组结构转换的常见工具包括D2R、Virtuoso、Morph、r2rml4net、db2triples、Quest等开源工具，以及Virtuoso、Oracle SW等商业工具。这些工具可以帮助将关系型数据库中的数据转换为三元组结构，以便构建和扩充知识图谱。