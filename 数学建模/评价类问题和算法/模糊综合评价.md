大部分是抄课件的，不过课件字有点丑...就重新打了一份（当然还有部分直接截图了）
更多的关于模糊数学资料的补充：
	[模糊数学模型（一）： 隶属函数、模糊集合的表示方法、模糊关系、模糊矩阵](https://blog.csdn.net/qq_29831163/article/details/89892822)
	[模糊数学模型（二）：模糊模式识别](https://blog.csdn.net/qq_29831163/article/details/89893887)
	[模糊数学模型（三）：模糊聚类分析方法](https://blog.csdn.net/qq_29831163/article/details/89893908)
	[模糊数学模型（四）：模糊决策分析方法](https://blog.csdn.net/qq_29831163/article/details/89913744)
	[模糊数学笔记 - 知乎](https://www.zhihu.com/column/c_1279143453180952576)
	[模糊数学基础及应用 - 知乎 (zhihu.com)](https://www.zhihu.com/column/c_1637873601272324096)
# 一、概述

### 引入
**数学归纳法**与**秃子悖论**：
>数学归纳法： 先证明n=1时成立，再假设推广至n=k时也成立，验证n=k+1也成立，最终推出对于所有的n均成立

>秃子悖论：假设某人满头秀发，那么他减少一根时，不是秃子；假设减少k根不是秃子，那么减少k+1根也不是秃子，最后推得所有头发都没有时也不是秃子，即出现了悖论

如何解释这个悖论？引入**模糊**的概念

#### 数学中研究的量的划分
确定性：经典数学（几何、代数）
不确定性：
	随机性（概率论、随机过程）
	灰性（灰色系统）
	模糊性（模糊数学）

# 二、经典集合与模糊集合的基本概念

## 经典集合(classical set)和特征函数

1. 集合：具有相同属性的事物的集体，如1：颜色性别、品牌、自然数集等
2. 基本属性：
	1. 互斥性: $\forall a \in A, b \in A, 均有a \neq b$
	2. 确定性: $a \in A 和 a \not \in A有且仅有一项成立（非此即彼）$
	3.  集合的表示方法：枚举、描述、韦恩图、<font color = "red">特征函数法</font>
	4. **特征函数**(characteristic function法（对经典集合的刻画）：
	   $f_A :U \rightarrow \{0,1\}$ ， $U$ : 论域（感兴趣的一些对象的集合），$f_A$ 表示A集合的特征函数
	   eg. $A(成绩集合的集合)=\{60, 61,..., 100\}， U(全班成绩的集合）=\{68,77,40,...\}$
	  $$f_A  = \begin{cases} 1, & 成绩 \ge 60 \\ 0, & 成绩<60 \\  \end{cases}$$
	  $$f_A(x) = \begin{cases} 1, & x \in A \\ 0, & x \notin A \\  \end{cases}，\quad \forall x \in U(注：U可看作定义域,\{0,1\}可看作值域)$$

## 模糊集合(fuzzy set) 和隶属函数

1. 模糊集合：用于描述**模糊性概念**的集合（帅、美丑、年轻）
2. 与经典集合相比，模糊集合承认**亦此亦彼**
3. 数学中对模糊集合的刻画：**隶属函数**(membership function)
	$M:U \rightarrow [0,1],\quad u \mapsto M(u)$ (注意与 $\{0,1\}$ 的区别，$\{0,1\}$ 中只有0和1两个元素，$[0,1]$ 有无数种可能)
	$M(u)$ 称为 $M$ 的**隶属函数**，或称为 $u$ 对 $M$的**隶属度**（相符程度）
举个栗子（这里的 $u_A$和 $M$ 含义一样)：![[微信截图_20230710135832.png]]
对于U中每一个元素，均对应于M中的一个隶属度，隶属度介于 $[0,1]$ ，越大表示越属于这种集合
注：若对于一个模糊集合M给出了一个一个隶属函数 $U_M$ , 则我们可以将二者视为等同（方便符号表示，即$M(u) = U_M(u)$

4. 模糊集合的三种表示方法：
	论域$U=\{u_1,u_2,...u_n\}$，模糊集合为$M$, 隶属度为$M(u_i), i=1,2,...,n$
	1. Zadeh表示法：
		$M = \frac{M(u_1)}{u_1} +  \frac{M(u_2)}{u_2}  + ... +  \frac{M(u_n)}{u_n}$, 注意这里的+只是一种记号，方便论域U为无限集合的表示，不是传统意义上的加法！
	2. 序偶表示法
		$M = \{(u_1, M(u_1)), \ (u_2, M(u_2)),..., \ (u_n, M(u_1)) \}$
	3. 向量表示法
	  $M=\{M(u_1), M(u_2),...,M(u_n)\}$
	eg.(这里的A(x)与M(u)意思等同)![[微信截图_20230710141805.png]]
	
	特别的，当论域U为无限集合时，$M= \int_{u \in U} \frac{U_M(u)}{u}$(用一个积分号来表示)
	
	![[微信截图_20230710145344.png]]

5. 模糊集合的分类
	一般的，我们可以将模糊集合分为三类
		1. 偏小型：年轻，小，冷
		2. 中间型：中年，中，暖
		3. 偏大型：年老，大，热
	可以想象，隶属函数的图像和模糊集合的类型有很大关系：
	![[微信截图_20230710145538.png]]


# 三、隶属函数的三种确定方法
## 模糊统计法
数模比赛中很少用，因为要设计发放问卷，可能来不及，但实际使用研究用得较多
原理：找多个人去对同一个模糊概念进行描述，用隶属频率去定义隶属度

eg. 定义“年轻人”的隶属函数
	1. 定义人的年龄为论域U，调查n个人
	2. 让这n个人仔细考虑“年轻人”的含以后，给出他们认为的最合适的年龄区间
	3. 对于任意一个确定的年龄，例如25岁，若这n个人中有m个人的年龄区间包含有25，则称$\frac{m}{n}$ 为25岁对于“年轻人”的隶属频率
	4. 以此类推，我们可以找出所有年龄对于“年轻人”的隶属频率
	5. 若 **n很大** 时，隶属频率会趋于稳定，此时我们可以将其视为隶属度，进而得到隶属函数$$M(u_0)=\lim_{u \to \infty} \frac{u_0 \in M^* 的次数}{n}$$($M^* 为U中一个随机变动的集合$)
	

## 借助已有的客观尺度

| 论域 |  模糊集  |   隶属度   |
|:----:|:--------:|:----------:|
| 设备 | 设备完好 | 设备完好率 |
| 产品 | 质量稳定 |   正品率   |
| 家庭 | 小康家庭 | 恩格尔系数 |

注：这里我们找的指标必须结语0到1之间。如果不是，则可归一化（$\frac{x_i}{\sum x_i}(x_i \ge 0)$)

## 指派法(most important)(根据问题性质直接套用某些分布作为隶属函数，主观性较强)
![[微信截图_20230710214336.png]]
![[微信截图_20230710214347.png]]
（注：此处$\mu_A$ 与$M(x)$意思一样，只是换了表示形式）

例1：试用柯西分布确定“年轻人”的隶属函数
解：“年轻人”是偏小型，对应的柯西分布为$$M(x)=\begin{cases} 1, & x \leq a \\ \frac{1}{1+\alpha (x-a)^{\beta}}, & x>a \\  \end{cases}$$
显然，这里有三个未知参数：$a, \alpha, \ \beta$
根据生活经验（或别人的研究成果、常识），我们令$a = 20, M(30) = 0.5$
注： $M(30)=0.5$ 是考虑到40岁一般是中年人，那么20-40中间是30，其隶属度可设为$\frac{1}{2}$ ；同时，$\beta$ 在指数部分，我们一般倾向于简化模型，则 $\beta$ 可设为1或者2
例如：当 $a = 20, A(30)=0.5, \beta=2$ 时，可解出$\alpha = 0.01$

例2：已知某天 $SO_2$ 的浓度为$0.07mg/m^3$, 大气污染物中关于 $SO_2$ 的评价标准为下表，试确定 $SO_2$ 在每个等级中的隶属度。 ^77993e

| Ⅰ级 |  Ⅱ级  | Ⅲ级 |  Ⅳ级 |
|:----:|:--------:|:----------:|:----:|
| 0.05 | 0.15 | 0.25 | 0.50 |
解：Ⅰ级为偏小型，Ⅱ级和Ⅲ级为中间型，Ⅳ形为偏大型
$$M_1(x)=\begin{cases} 1, & x \leq 0.05 \\ \frac{0.15-x}{0.15-0.05}, & 0.05<x<0.15 \\ 0, & x\ge0.15 \end{cases}$$
$$M_2(x)=\begin{cases} 0, & x \leq 0.05 \\ \frac{x-0.05}{0.15-0.05}, & 0.05<x\leq 0.15 \\ \frac{0.25-x}{0.25-0.15}, & 0.15<x< 0.25 \\ 0, & x\ge0.25 \end{cases}$$
$$M_3(x)=\begin{cases} 0, & x \leq 0.15 \\ \frac{x-0.15}{0.25-0.15}, & 0.15<x\leq 0.25 \\ \frac{0.5-x}{0.5-0.25}, & 0.25<x< 0.5 \\ 0, & x\ge0.5 \end{cases}$$
$$M_4(x)=\begin{cases} 0, & x \leq 0.25 \\ \frac{x-0.25}{0.5-0.25}, & 0.05<x<0.15 \\ 1, & x\ge0.5 \end{cases}$$
则$A_1(0.07)=\frac{0.15-0.07}{0.15-0.05}=0.8, \ A_2(0.07)=\frac{0.07-0.05}{0.15-0.05} = 0.2, \ A_3(0.07)=A_4(0.07) = 0$
# 四、模糊综合评价
## 评价问题综述
模糊评价问题是要把**论语中的对象对应论域集中一个指定的的评语**或者**将方案作为评语集并选择一个最优的方案**（两个角度）

在模糊综合评价中，引入了三个集合：
	1. 因素集（评价指标集）$U=\{u_1, u_2,...,u_n\}$(和论域一个符号，但表示的含义有很大差别)
	2. 评语集（评价的结果）$V = \{v_1, v_2,...v_m\}$ （n与m无必然关系）
	3. 权重集（指标的权重）$A=\{a_1, a_2, ..., a_n\}$ （和集合一个符号，不要搞混）

例如：评价一个学生表现
	U={专业排名、课外时间、志愿服务、竞赛成绩}
	V={优、良、差}
	A={0.5，0.1，0.1，0.3}

### 一级模糊综合评价模型
条件：指标个数较少（问题复杂，指标较多尝试多级）
建立步骤：
#### 确定因素集
找到多个评价的角度，构成评价指标体系集合，即因素集
$$ U = \{u_1, u_2,...u_n\}$$
一级模糊评价中，n往往较小（<6)，且指标间相关性不强

#### 确定评语集
由于各指标评价值不同，往往会形成不同等级，由各种不同决断构成的集合称为评语集
$$V=\{v_1,v_2,...,v_m\}$$
注意评语集有m个元素

#### 确定各因素权重
$$A = \{a_1,a_2,...,a_n\}$$
其中，$a_i$ 为第 $i$ 个因素的权重，且满足 $\sum_{i=1}^n a_i = 1$
确定权重方法：
	1. Delphi法：征求意见并排序，统一则采纳，不统一则反馈并再次征求意见，直到统一为止
	2. 层次分析法
	3. 熵权法

#### 确定模糊综合判断矩阵(重要)
对指标 $u_i$ 来说，对各个评语的隶属度为 $V$ 上的模糊子集。对指标 $u_i$ 的评判记为
$$R_i = [r_{i1},r_{i2}, ...,r_{im}]$$$r_{ij}$ 指指标$u_i$ 对评语 $j$ 的**隶属度**.

各指标的**模糊综合判断矩阵**为
$$R=\begin{equation}\begin{bmatrix}
r_{11} & r_{12}& \cdots & r_{1m} \\
r_{21} & r_{22}& \cdots & r_{2m} \\
\vdots & \vdots &\ddots & \vdots \\ 
r_{n1} & r_{n2} &\cdots & r_{nm} \end{bmatrix}\end{equation}$$
$$=\begin{equation}\begin{bmatrix} R_1\\ R_2 
\\ \ddots \\ R_n \end{bmatrix}\end{equation}$$

它是一个从U到V的模糊关系矩阵
第一列：各个指标对于评语1的隶属度

#### 综合评判
如果有一个从$U$到$V$的模糊关系$R=(r_{ij})_{n \times m}$ , 那么利用$R$ 就可以得到一个模糊变换：
$$ T_R: F(U) \rightarrow F(V)$$
由此变换，就可得到综合评判结果 $B_{1 \times m} = A_{1 \times n} \cdot R_{n \times m}$ 
综合后的评判可看作是 $V$ 上的模糊向量，记为 $B = [b_1, b_2,...,b_m]， b_j$表示评价对象对评语 $j$ 的隶属度

若 $max\{b_1,b_2,...,b_m\}=b_k$ ，则要评价的对象要划分到评语k这一类（隶属度最大，代表与数据的相符程度最大）

### 例题
#### 01 通过模糊统计法确定评语(没有给出实际数据)
![[微信截图_20230711101212.png]]

#### 02 指派法确定评语（给出了实际数据）
下表给出了大气污染物评价标准，今测得某日某地表中这些污染物日军浓度依次为$(0.07,0.2,0.123,5.00,0.08,0.14)$,  各污染物权重确定如下：$(0.1,0.2,0.3,0.3,0.05,0.05)$ （权重集合），试评价当天空气质量等级
![[微信截图_20230711101933.png]]

结合上文例子食用
![[模糊综合评价#^77993e]]

同理，通过梯形分布构造各污染物的隶属函数
![[微信截图_20230711102948.png]]
得到模糊综合评价矩阵
$$R=\begin{equation}\begin{bmatrix}
0.8 & 0.2& 0 & 0 \\
0.56 & 0.44& 0 & 0 \\
0 & 0.6 & 0.4 & 0 \\ 
0 & 0.5 &0.5 & 0\\ 
0.7 & 0.3 &0 & 0\\ 
0.5 & 0.5 &0 & 0\\ \end{bmatrix}\end{equation}$$
注意：这里使用梯形分布得到的四个评语的隶属度的和恰好为1，但使用其他分布得到的隶属度的和不一定为1！
注：因为0.8>0.2，因此，若只考虑$SO_2$ 这一个因素，则会认为空气质量为一级，但是因为是综合评价，所以得考虑多个指标
$$B = A \cdot R = (0.252,0.478,0.27,0)$$

#### 03 方案评价
![[微信截图_20230711134324.png]]
1. 确认隶属函数（隶属函数不唯一，合理即可）
	常用套句：根据专家建议..../根据其他人写的文章....
	
	1. 可采矿量的隶属函数（偏大型，越大越好）
	  最多8800吨，所以用资源的利用函数作为隶属函数
	  $$M_A(x)=\frac{x}{8800}$$
	2. 基建投资的隶属函数（偏小型，越少越好）
	  投资约束为8000万，所以
	  $$M_B(x)=1-\frac{x}{8000}$$
	3. 采矿成本的隶属函数
	  根据专家意见，采矿成本$a_1 \leq 5.5元/吨 为低成本， a_2=8.0 元/吨为高成本$ （如果没有专家意见，也可以认为是偏大型，直接定义成$M_C=1-\frac{x}{7}$即可
	  $$M_C(x)=\begin{cases} 1, & 0\leq x \leq a_1 \\ \frac{a_2-x}{a_2-a_1}, & a_1\leq x \leq a_2 \\ 0, & a_2 \leq x \end{cases}$$

	4. 不稳定费用的隶属函数
	  $$M_D(x)=1-\frac{x}{200}$$
	5. 净现值的隶属函数
	  取上限15（百万元），下限0.5（百万元，采用线性隶属函数
	  $$M_E(x)=\frac{x-50}{1450}$$
	 注意：五个因素的隶属函数均经过正向化处理，即隶属度越大说明越有利

2. 根据隶属函数计算隶属度，得到单因素评判矩阵
![[微信截图_20230711135649.png]]
根据专家评价（没有专家则可用熵权法），诸因素在决策中占的权重为$A=(0.25,0.20,0.20,0.10,0.25)$
于是诸方案的综合评价为$$B=A \cdot R=(0.7435,0.5919,0.6789,0.3600,0.3905)$$
由此可知，方案Ⅰ最佳，Ⅲ次之，Ⅳ最差

##### 代码实现
```python
# 导入numpy模块，用于处理数组和矩阵运算  
import numpy as np  
  
# 从data14_4.txt文件中读取数据，存储为一个一维数组a  
a = np.loadtxt('data14_4.txt')  
  
# 定义五个函数，分别对应五个评价指标的归一化处理  
f1 = lambda x: x/8800   # 指标1：可采矿量，最大值为8800  
f2 = lambda x: 1-x/8000 # 指标2：基建投资，最小值为0，最大值为8000  
# 如果x小于等于5.5，那么返回1； 如果x大于5.5且小于8，那么返回(8-x)/(8-5.5)的值； 如果x大于等于8，那么返回0。  
# 具体解释： 布尔值True和False可以被当作数值1和0来进行运算。  
#          所以，当x小于等于5.5时，(x <= 5.5)的值是True，也就是1，而((x > 5.5) & (x < 8))的值是False，也就是0，所以整个表达式的值是1；  
#          当x大于5.5且小于8时，(x <= 5.5)的值是False，也就是0，而((x > 5.5) & (x < 8))的值是True，也就是1，所以整个表达式的值是(8-x)/(8-5.5)；  
#          当x大于等于8时，(x <= 5.5)和((x > 5.5) & (x < 8))都是False，也就是0，所以整个表达式的值是0。这样就实现了分段函数的效果。  
f3 = lambda x: (x <= 5.5)+(8-x)/(8-5.5)*((x > 5.5) & (x < 8)) # 指标3: 采矿成本，最小值为0，最大值为8，分段线性函数  
f4 = lambda x: 1-x/200  # 指标4：不稳定费用，最小值为0，最大值为200  
f5 = lambda x: (x-50)/(1500-50) # 指标5：净利润，最小值为50，最大值为1500  
  
# 创建一个空列表R，用于存储归一化后的评价指标值  
R = []  
# 遍历数组a中的每个元素，分别调用对应的函数进行归一化，并将结果添加到列表R中  
for i in range(len(a)):  
    s = 'f'+str(i+1)+'(a['+str(i)+'])';R.append(eval(s))  
# 将列表R转换为一个numpy数组R  
R = np.array(R)  
  
# 定义一个权重向量w，表示各个评价指标的相对重要性  
w = np.array([0.25, 0.2, 0.2, 0.1, 0.25])  
  
# 使用矩阵乘法(@符号)计算综合评价值B，即权重向量w和评价指标向量R的内积  
B = w @ R  
  
# 打印综合评价值B，并保留四位小数  
print('评价值：', np.round(B, 4))
```
注：对遍历拼接字符串部分的解释(摘自chatgpt)
>首先，我们需要知道数组a是如何从文件中读取数据的。使用np.loadtxt函数，可以将文件中的每一行作为一个子数组，然后将所有的子数组组合成一个二维数组。例如，如果文件中有两行数据，分别是1 2 3和4 5 6，那么读取后的数组a就是[1, 2, 3], [4, 5, 6]。

>然后，我们需要知道如何根据索引i来访问数组a中的元素。使用a[i]可以访问第i个子数组，使用a[\i]\[j]可以访问第i个子数组中的第j个元素。例如，如果i为0，那么a[i]就是[1, 2, 3]，a[i]\[0]就是1。

>接下来，我们需要知道如何使用字符串拼接来构造函数调用的表达式。使用+号可以将两个字符串连接起来，使用str函数可以将一个数值转换为字符串。例如，如果i为0，那么'f'+str(i+1)就是'f1'，表示要调用f1函数；如果j为0，那么'(a\['+str(i)+']['+str(j)+'])'就是'(a[0]\[0])'，表示要传入a[0]\[0]作为参数；将两个字符串连接起来，就得到了'f1(a[0]\[0])'，表示要调用f1函数并传入a[0]\[0]作为参数。

>最后，我们需要知道如何使用eval函数来求值字符串表达式。使用eval函数可以将一个字符串作为Python代码执行，并返回执行结果。例如，如果i为0，j为0，那么eval('f1(a[0]\[0])')就相当于执行了f1(a[0]\[0])这条代码，并返回了其结果。

>这样就完成了字符串拼接的过程。具体到你给出的文件第一行的数据，当i为0时，s就是'f1(a[0])'；当i为1时，s就是'f2(a[1])'；以此类推。

注：这里的这份代码是直接复制《数学建模算法与应用》一书的，由于模糊评价计算较为简单，而且由于采用的指派法不同，代码也会不同，故如果要运用的话得根据实际情况灵活处理。

### 多级综合评价
引入原因：
	因素集中元素较多（指标较多），可将其进行归类，从而简化运算。例如：确定权重时，指标越少越容易

#### 二级综合评价模型（套用两次一级综合评价即可）
步骤：
	1. **划分因素集**（根据相关性划分）$U=\{u_1,u_2,...,u_n\}$为若干组$U=\{U_1,U_2,...,U_k\}$，且 $U= \cup_{i=1}^k U_i \quad and \quad U_i \cap U_j = \varnothing \quad (i \not = j)$ 
	   (不同子集中元素各不相同)
	2. **确定评语集**$V=\{v_1,v_2,...,v_m\}$，并对第二级因素集$U_i=\{u_1^{(i)},u_2^{(i)},...,u_n^{(i)} \}$进行评判得到综合评判矩阵
	$$R_i=\begin{equation}\begin{bmatrix}
r_{11}^{(i)} & r_{12}^{(i)}& \cdots & r_{1m}^{(i)} \\
r_{21}^{(i)} & r_{22}^{(i)}& \cdots & r_{2m}^{(i)} \\
\vdots & \vdots &\ddots & \vdots \\ 
r_{n1}^{(i)} & r_{n2}^{(i)} &\cdots & r_{nm}^{(i)} \end{bmatrix}\end{equation}$$
	若$U_i=\{u_1^{(i)},u_2^{(i)},...,u_n^{(i)}\}$的权重为$A_i=\{a_1^{(i)}, a_2^{(i)},...,a_n^{(i)}\}$，则综合评判为 $B_i=A_i \cdot R_i \ (i=1,2,...,k)$
	 3. 再对第一级因素$U=\{u_1,u_2,...,u_k\}$ 进行综合评判，若权重为$A=\{a_1, a_2, ...,a_k\}$,  则$R=\begin{equation}\begin{bmatrix} B_1\\ B_2 \\ \ddots \\ B_k \end{bmatrix}\end{equation}$
	     综合评判为$B=A \cdot R$
	4. 按最大隶属度原则确定相应评语或等级

##### 例子（太长了...就截下来了）
![[微信截图_20230711141854.png]]
![[微信截图_20230711141959.png]]

#### 三级模糊综合评价模型（太多字了...打不动辽）
指标必须经过正向化 
![[微信截图_20230711162442.png]]
![[微信截图_20230711162501.png]]
![[微信截图_20230711162519.png]]
![[微信截图_20230711162534.png]]
